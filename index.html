<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>BRASILEIRÃO SERIE A</title>
        <link rel="stylesheet" href="style/style.css">
    </head>
    <body>
        <div>
            <!-- DIV cabeçalho navegação-->
            <div class="base-container">
                <!-- DIV menu paginas-->
                <div class="container-left">
                    <div class="item blue">
                        globo.com
                    </div>
                    <div class="item red">
                        g1
                    </div>
                    <div class="item green">
                        ge
                    </div>
                    <div class="item orange">
                        gshow  
                    </div>
                    <div class="item dark-red">
                        globoplay
                    </div>
                    <div class="item dark-orange">
                        cartola
                    </div>
                    <div class="item black">
                        sportv
                    </div>                
                </div>
                <!-- div assinatura e login-->
                <div class="container-right">
                    <div class="black assine">
                        <a>Assine já</a>
                    </div>
                    <a>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                            </svg>
                            <span>Conta Globo</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="box">
            <div class="box-right">
                <div class="menu-nav">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                </svg><div>menu</div>
                </div>
                <div class="ge-text">ge</div>
                <div class="divider"> </div>
                <div class="shield">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-shield" viewBox="0 0 16 16">
                      <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
                    </svg>
                  </div>
            </div>
            <div class="header-title">
                <div class="brasileirao-txt"> BRASILEIRÃO SERIE A </div>
            </div>
            <div class="barra-buscar">
                <form>
                    <label for="buscar">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                        </svg>
                    </label>
                        <input class="search-input" placeholder="BUSCAR" type="search" name="buscar" id="buscar">
                </form> 
            </div>
        </div>
        <div class="list-headers" style="margin-bottom: 10px;">
            <div class="item-list-header">classificação</div>
            <div class="item-list-header">simulador</div>
            <div class="item-list-header">vídeos</div>
            <div class="item-list-header">seja&nbsp;pro</div>
            <div class="item-list-header">VAR</div>
        </div>
        <div class="info-box">
            <div class="table-box">
                <h2>TABELA</h2>
                <div class="overflow">
                    <div class="table-size">
                        <table class="table" id="table">
                            <thead>
                                <tr>
                                    <th style="width: 20px ;"></th>
                                    <th style="width:150px;" class="teams">classificação</th>
                                    <th style="width:70px" class="">p</th>
                                    <th style="width:70px">j</th>
                                    <th style="width:70px" class="">v</th>
                                    <th style="width:70px">e</th>
                                    <th style="width:70px" class="">d</th>
                                    <th style="width:70px">GP</th>
                                    <th style="width:70px" class="">GC</th>
                                    <th style="width:70px">SG</th>
                                    <th style="width:70px" class="">%</th>
                                    <th style="width:350px">ÚlT. Jogo</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="line"></div>
            <div class="games">
                <h2>JOGOS</h2>
                <div class="round-selection-bar">

                    <div class="round-selection-bar-arrow">   
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="30" fill="green" class="bi bi-arrow-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                        </svg>
                    </div>

                    <div id="rodada"></div>

                    <div class="round-selection-bar-arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="30" fill="green" class="bi bi-arrow-right" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
                          </svg>
                    </div>
            
                </div>
                    <div id="games">

                    </div>
                </div>
            </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script>

                    // função sem nome(anonima) = atribuida a variavel (no caso atual na abertura da tela)
            window.onload = function(){
                $.ajax({
                    url: "https://api.api-futebol.com.br/v1/campeonatos/10/tabela",
                    headers: { "Authorization": "Bearer live_171ba2522aa76b5641e86d327f38e2"}, // precisa abrir chaves pois a escrita esta no formato JSON
                    type: "GET", // tipo da requisição
                    success: function(data){
                        loadTable(data);
                    },
                    error: function(){
                        alert("Deu erro na requisição: " + error.toString());
                    }
                })   // jquery começa com "$" sifrão
                
                $.ajax({
                    url: " https://api.api-futebol.com.br/v1/campeonatos/10/rodadas/1",
                    headers: { "Authorization": "Bearer live_171ba2522aa76b5641e86d327f38e2"}, // precisa abrir chaves pois a escrita esta no formato JSON
                    type: "GET", // tipo da requisição
                    success: function(data){
                        loadGames(data)
                    },
                    error: function(){
                        alert("Deu erro na requisição: " + error.toString());
                    }
                })   // jquery começa com "$" sifrão

            }
            
            const mapResultadoUltimoJogosWidget = {
                "v" : "<span class='victory'></span>",
                "d" : "<span class='defeat'></span>",
                "e": "<span class='draw'></span>"
            }
            
            // EXEMPLO
            //const diasDaSemanaArray = ["domingo","segunda","terça","quarta","quinta","sexta","sabado"]


            function loadTable(data){
                var tabela = document.getElementById("table")
                for (let posicaoTimes = 0; posicaoTimes < data.length; posicaoTimes++) {
                    const element = data[posicaoTimes];
                
                    var ultimosJogosArrayWidgets = [];

                    for (let result = 0; result < element.ultimos_jogos.length; result++) {
                        const historicoJogos = element.ultimos_jogos[result];
                            ultimosJogosArrayWidgets.push(mapResultadoUltimoJogosWidget[historicoJogos])

                    }
                        var arrayJogosWidgetFormat = ultimosJogosArrayWidgets.join("")

                    var tabelaAdd = '<tr>'+
                        "<td class='ranking'>" + element.posicao + "</td>" +
                        "<td class='teams'>" + element.time.nome_popular + "</td>" +
                            "<td class='text-center'>"+ element.pontos +"</td>" +
                            "<td class='text-center'>" + element.jogos +"</td>" +
                            "<td class='text-center'>"+ element.vitorias +"</td>" +
                            "<td class='text-center'>" + element.empates +"</td>" +
                            "<td class='text-center'>"+ element.derrotas +"</td>" +
                            "<td class='text-center'>"+ element.gols_pro + "</td>" +
                            "<td class='text-center'>"+ element.gols_contra +"</td>" +
                            "<td class='text-center'>"+ element.saldo_gols + "</td>" +
                            "<td class='text-center'>"+ element.aproveitamento +"</td>" +
                            "<td class='text-center'>"+ arrayJogosWidgetFormat +"</td>" +
                            "</tr>"                  
                        
                    tabela.innerHTML += tabelaAdd;


                };
                }


                function loadGames(data){
                    // for (let rodada = 0; rodada < data.length; rodada++) {
                    //     const element = data[rodada];
                        
                    // }
                    var rodada = document.getElementById("rodada")
                    rodada.innerHTML = data.nome
                    var games = document.getElementById("games")

                    for (let partida = 0; partida < data.partidas.length; partida++) {
                        const infoPartidas = data.partidas[partida];

                        let date = new Date(infoPartidas.data_realizacao_iso);
                        let dateDay = date.getDay()
                        // var Dia da semana = diaDaSemanaArray[dateDay] -> exemplo alternativo para a solução
                        // objetivo de estudo;
                        var diaDaSemanaDescricao = retornaDiaDaSemanaDescricao(dateDay);

                        var gameAdd = "<div class='game' class='game'>" +
                                            "<div class='place-time'>" +
                                                // <!-- Estadio -->
                                                "<div class='stadium-name'>"+ infoPartidas.estadio.nome_popular +"</div>" +
                                                "<strong class='matchInfo'>"+infoPartidas.data_realizacao+" • "+ diaDaSemanaDescricao +" • "+infoPartidas.hora_realizacao + "</strong>" +
                                            "</div>" +
                                            "<div class='in-game'>" + 
                                                "<div class='playing-team'>" +
                                                    "<div>"+infoPartidas.time_mandante.sigla+"</div>" +
                                                    "<img src="+infoPartidas.time_mandante.escudo+" alt='' height='30' width='30'>" +
                                                "</div>" +
                                                "<div>" +
                                                    "<strong>"+ infoPartidas.placar_mandante +" </strong>" +
                                                    "<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-x-lg' viewBox='0 0 16 16'> <path d='M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z'/></svg>" +
                                                    "<strong> "+ infoPartidas.placar_visitante +"</strong>"+
                                                "</div>" +
                                            "<div class='playing-team'>" +
                                                "<img src="+ infoPartidas.time_visitante.escudo +" alt='' height='30' width='30'>" +
                                                "<div>"+infoPartidas.time_visitante.sigla +"</div>" +         
                                            "</div>" +
                                        "</div>"

                                    
                                games.innerHTML += gameAdd;  
                                        
                    }
                        
                    }

                    function retornaDiaDaSemanaDescricao(indiceDiaDaSemana) {
                            switch(indiceDiaDaSemana){
                                case 0:
                                    return "domingo"
                                case 1:
                                    return "Segunda-feira"
                                case 2:
                                    return "Terça-feira"
                                case 3:
                                    return "Quarta-feira"
                                case 4:
                                   return"Quinta-feira"
                                case 5:
                                    return "Sexta-feira"
                                case 6:
                                   return "Sábado"
                            }
                        
                    }
                   
        </script>
    </body>
</html>
